<!DOCTYPE html>
<html>
  <head>
    <title>UTK NE department seminar</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Ubuntu:500);
      @import url(https://fonts.googleapis.com/css?family=Open+Sans);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
      
      @page {size: 1280px 720px; margin: 0; }
      @media print { 
          .remark-slide-scaler { 
              width: 100% !important; 
              height: 100% !important; 
              transform: scale(1) !important; 
              top: 0 !important; 
              left: 0 !important; 
          } 
      }

      body { font-family: 'Open Sans', sans-serif; }
      h1, h2, h3 {
        font-family: 'Ubuntu';
        font-weight: normal;
        }
      .remark-container {background-color: #F5F5F5; }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .remark-slide-content { background-color: #FFFAF0; font-size: 26px; 
                         h1 { font-size: 38px; } h2 {font-size: 32px; } h3 { font-size: 28px; }
       }
      .remark-slide-number { bottom: 8px; position: absolute; right: 8px; }
      .column:first-of-type {float:left}
      .column:last-of-type {float:right}

      .split-60 .column:first-of-type {width: 60%}
      .split-60 .column:last-of-type {width: 40%}

      .split-50 .column:first-of-type {width: 50%}
      .split-50 .column:last-of-type {width: 50%}
    </style>
  </head>
  <body>
<textarea id="source">
class: center, middle

### Interesting Nuclear Things with Bob at Idaho Falls 
#### UTK Nuclear Engineering Department Seminar

$~$
$~$
$~$

##### .right[
[Bob Borrelli](https://thedoctorrab.github.io/)  
University of Idaho-Idaho Falls  
Center for Advanced Energy Studies  
@TheDoctorRAB ![git](img/git.png) ![twitter](img/twitter.png)
]

##### .right[
23 October 2019    
]

.right[![UTK](img/utk.png)]
---
class: center,middle

## No outline slide
---
## Who is Bob? 

I grew up in Rhode Island 

BS (ME/NE) and MS (CE/EnvE) at Worcester Polytechnic Institute   
Open pool 10 kW reactor  
Capstone - PLC programming for real time operational data [1]

MS - Characterization of radioactivity in the environment by total energy

Assistant Radiation Officer (1996-9)  
Senior Reactor Operator (1994-9)
---
### My dissertation focused on radionuclide transport modeling coupled with bentonite extrusion

![Fracture domain](img/fracture.domain.jpg)

**Repository safety could be enhanced**  
I derived the two models, coupled, assembled FEM solution  
Highly sorbing radionuclides confined in the bentonite extrusion region  

Also as part of postdoctorate research at Todai
---
### It was a lot of math (even if it doesn't look like it)

<a href="https://www.codecogs.com/eqnedit.php?latex=\dpi{150}&space;\large&space;\frac{\partial}{\partial{t}}[(\epsilon&plus;\sigma&space;K)N]&plus;\frac{1}{r}\frac{\partial}{\partial{r}}[r\epsilon&space;v_w(1-K)N]-\frac{1}{r}\frac{\partial}{\partial{r}}[r\frac{\partial}{\partial{r}}(\epsilon&space;DN)]=0" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\dpi{150}&space;\large&space;\frac{\partial}{\partial{t}}[(\epsilon&plus;\sigma&space;K)N]&plus;\frac{1}{r}\frac{\partial}{\partial{r}}[r\epsilon&space;v_w(1-K)N]-\frac{1}{r}\frac{\partial}{\partial{r}}[r\frac{\partial}{\partial{r}}(\epsilon&space;DN)]=0" title="\large \frac{\partial}{\partial{t}}[(\epsilon+\sigma K)N]+\frac{1}{r}\frac{\partial}{\partial{r}}[r\epsilon v_w(1-K)N]-\frac{1}{r}\frac{\partial}{\partial{r}}[r\frac{\partial}{\partial{r}}(\epsilon DN)]=0" /></a>

<a href="https://www.codecogs.com/eqnedit.php?latex=\dpi{150}&space;\large&space;\frac{1}{(1&plus;e)^2}\frac{\partial{e}}{\partial{t}}=\frac{1}{r}\frac{\partial}{\partial{r}}(D_V(e)&space;r&space;\frac{\partial{e}}{\partial{r}})" target="_blank"><img
    src="https://latex.codecogs.com/gif.latex?\dpi{150}&space;\large&space;\frac{1}{(1&plus;e)^2}\frac{\partial{e}}{\partial{t}}=\frac{1}{r}\frac{\partial}{\partial{r}}(D_V(e)&space;r&space;\frac{\partial{e}}{\partial{r}})" title="\large \frac{1}{(1+e)^2}\frac{\partial{e}}{\partial{t}}=\frac{1}{r}\frac{\partial}{\partial{r}}(D_V r \frac{\partial{e}}{\partial{r}})" /></a>

<a href="https://www.codecogs.com/eqnedit.php?latex=\dpi{150}&space;\large&space;\frac{dR_T}{dt}=2D_V(e)&space;\frac{\partial{e}}{\partial{r}}&space;\bigg\rvert_{R_T}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\dpi{150}&space;\large&space;\frac{dR_T}{dt}=2D_V(e)&space;\frac{\partial{e}}{\partial{r}}&space;\bigg\rvert_{R_T}" title="\large \frac{dR_T}{dt}=2D_V \frac{\partial{e}}{\partial{r}} \bigg\rvert_{R_T}" /></a>
---
### But I made some #fancy graphs

![tribex](img/phd.png)

**Main takeaway**  
Highly sorbing radionuclides could be confined to extrusion region
---
class: center,middle

## On to current times
---
## UI at Idaho Falls is an interesting situation

Nontraditional is probably the best term

Main campus 550 miles

Technically, only 3 NE faculty though a lot of 'affiliates'

It's challenging but difficult because I can do what I want 

No one currently at Associate level

Resources can be limited
---
class: center,middle

![Idaho](img/idaho.jpg)
---
### Some fun UI highlights to date

1. Asked if I knew Katy Huff in my interview presentation
2. ANS student section adviser - two campuses - Second in Glasstone 2018  
3. Active in local section - delivered over 2000 smoke detectors and counting
4. EC on Fuel Cycle and Nonproliferation Divisions
5. Scenic drive to main campus
6. State of Idaho Department of Commerce funding with Japanese company
7. NASA *EPSCoR* grant for Am RTG fuel 
8. No NEUPs yet because Steve and Jamie beat me down
9. Nuclear cybersecurity WG with Prof. Michael Haney in CS
10. Published with multiple CS faculty
11. Affiliate of Boise State Energy Policy Institute 
12. Coordinator for new decommissioning  and fuel management certificate
13. WSC and NuScale (awarded to UIdaho not CAES) simulators
14. Tweet upside down
15. State of Idaho PE license, Faculty Restricted
---
class: middle
#### #Fancy nuclear cybersecurity technical session and panel at ANS Winter with Jamie
---
## What about students? 

We have a mix of 'traditional' and 'nontraditional' (*old*) students  
Can have a learning curve when coming back to school after a long time

INL educational contract and Joint Appointments (VPR Janet Nelson)

1. Kelley Verner - PhD candidate - ANS SSC chair - U-Mo fuel with *INL subcontract*
2. Jieun Lee - MS - pyroprocessing safeguards - Texas A&M for PhD 
3. Emma Redfoot - MS - hybrid systems - Oklo 
4. Malachi Tolman - MEng - BISON - Sandia - also INL subcontract
5. Seth Dustin - MS - AM RTG - NNSA Fellow - Los Alamos
6. John Peterson - MS - microreactor design - Atomic Alchemy Idaho Falls startup

There are other nontraditional students working with me on SMR fuel cycle analysis, back-end management, PID controls, unmanned space travel
---
class: center,middle

### Selected research pathways

#### (with many pictures)
---
class: center,middle

## Safeguardability
### Safeguards-by-design

#### Started at UC-Berkeley with Per Peterson, Joonhong Ahn, KAERI
---
### At UCB - developed a holistic, top-down methodology

Commercial pyroprocessing facility example system

Intended to apply to other nuclear materials facilities

**Proliferation resistance**  
Develop functional components to facility design

**Physical protection**  
Take advantage of inherent design features

**Systems assessment = Safeguardability quantification**  
Risk-informed approach

Time may have passed me by, but I still want to develop it  
---
class: center, middle

## Long-term goals for HRS
---
class: center, middle

![flowsheet](img/flowsheet.jpg)
---
class: center, middle

![HRS](img/hrs.jpg)
---
class: center, middle

![farmer](img/farmer.jpg)
---
class: center, middle

## Modeling framework
---
class: split-60

.column[
#### Generalize system processes  
![intracell activities](img/intracell_activities.jpg)
]
.column[
.right[
#### Key  
(1) Process activity  
(2) In-situ recycle

(3) Byproduct  
(3a) Waste  
(3b) Recycle at head-end

(4) The actual product

(5) Testing   
(5a) Destructive assay  
(5b) Chemical analysis  
(5c) Quality assurance testing
]
]
---
class: center, middle

## Fuel fabrication process
---
### Injection casting assumed to fabricate metal fuel slugs

![fuel fabrication](img/fuel_fabrication.jpg)
---
class: split-60

.column[
#### Understand how material flow affects design
![activities](img/intracell_fuel.jpg)
]
.column[
.right[
#### Key  
(1) Injection casting

(2) Scrap

(3) TRU (heel)  
(3a) Crucible  
(3b) Quartz

(4) Fuel slugs

(5) Testing
(5a) DA  
(5b) Chemical analysis  
(5c) Other QA
]
]
---
### Part 1 - Use of MCNP to estimate wall thickness

![facility](img/facility.jpg)
---
### Will TRU processing state affect safeguardability?

1 - ERD metal+salt  
1a - ERD metal   
2 - U+TRU+salt   
3 - TRU+salt  
3a - TRU+Cd  
4 - U/TRU alloy  

SDEF - Cm-244 watt spectrum 

TRU processing states are not self-protecting under IAEA standard  

Wall thickness on par with other analogues (less than $10 \mu Sv/h$)  
Average 30 cm - 45 cm thickness concrete 

Maintenance, storage buffers located in proximity to process cells  
Material transfer paths and facility footprint reduced
---
### Part 2 - Apply discrete event simulation to facility design

![DES fuel fabrication 1](img/des_fuel1.jpg)
---
### Discrete event simulation describes state changes of system variables over time

![DES fuel fabrication 2](img/des_fuel2.jpg)
---
### Discrete event simulation lends itself well to object oriented programming

This is what I think is the key to safeguards-by-design

Jieun revamped the code

Model flow of Pu for each processing state; different times, batch size

Determine materials accounting due to operation, failure, maintenance

Connect to Type I error

$\Phi^{-1}(1-\alpha)+\Phi^{-1}(1-\beta)=\frac{SQ}{\sigma}$
---
### What can discrete simulation say about safeguardability (in terms of design)?

Results showed material flow not a function of equipment failure

Safeguardability shown as a function of material flow and design

For these proposed designs, operational goals are not affected - equal campaigns

SEID less than 2.4 kg for varying $1-\beta$

First build that showed designs can be evaluated quantitatively

Jieun then added error propagation and increased accounting 

First build calculated inventory difference at end of campaign

Now, at end of every material balance area/unit process
---
class: center, middle

![DES objects](img/des_objects.jpg)
---
class: split-50

.column[#### Total material processed  
![DES material](img/des_material.jpg)
]
.column[#### Total campaigns completed  
![DES campaign](img/des_campaign.jpg)
]
---
### We also performed a hazard operability analysis

Specialized form of risk assessment

Process flow diagrams developed for -  
1. Voloxidation
2. Electroreduction, electrorefining, electrowinning
3. Ar atmosphere control system 

Operational deviation analysis within the context of safeguard-by-design

Different hot cells for electroreduction and electrorefining (different salts)

Because low pressure possible salt leak could ruin materials accounting

Really forces you to understand systems at a very deep level

Actually really interesting to do
---
class: center, middle 

![HAZOP](img/hazop.jpg)
---
### Safeguardability - what capabilities are needed?

Someone who can and likes to code  
I feel like Diogenes over here

Verification, benchmarking of the current model form

Funding

Development of a GUI

Which we have capabilities for already

Waste stream characterization for safeguards termination

Figure of merit to quantify proliferation risk

Full HAZOP
---
class: center, middle

#### University of Idaho-Idaho Falls Nuclear Cybersecurity Working Group
---
#### We (i.e. me) acquired the Western Services Corp PWR simulator

**Modeling**  
I&C  
Thermal hydraulics  
Electrical generation and distribution systems  
Human factors  
Logic/control system testing

**Features**    
Two loop design, similar to the APR1400  
75 graphic control screens   
Full-featured trending system to monitor multiple transients 
Developers license allows for cybersecurity incidents to be coded and input into simulator  
Housed in the Applied Visualization Laboratory at CAES   
Source code
---
class: center, middle

![WSC 1](img/wsc1.jpg)
---
class: center, middle

![WSC 1](img/wsc2.jpg)
---
class: center, middle

![WSC 1](img/wsc3.jpg)
---
class: center, middle

![WSC 1](img/wsc4.jpg)
---
### How can cyber vulnerabilities be integrated into traditional risk assessment? 

Cyberattacks against critical energy infrastructure have gone from possible to eventual to actual

Plant modernization -----> digitization

Not just control panel

NRC wants stronger cybersecurity at plants but doesn't really know what that looks like

Emerging field with a lot of latitude to develop solutions 

(That is what I say when reviewers argue with me)
---
### Cyberattacks will act on many vectors

That means one type of attack can be used for multiple systems 

We take the position that actually 'hacking the reactor' is unlikely

Forcing operator to trip or vent steam will cost a lot of money 

There will also be a lot of down time to investigate the attack

Losses of several million dollars per year

I&C systems must be resilient to cyber domain threats, and guide operators with clear, prioritized information to make distinctions between safety events and cyber-based instrument manipulation
---
### We reviewed past cyber events at nuclear installations 

Davis-Besse, Browns Ferry, Hatch

Other non nuclear events - Ukraine, SF muni (they hacked it to actually run on time)

**Commonalities**   
Insufficient cybersecurity features  
Unintentional circumvention of facility security measures  
Unknowing insider participation  

These were not hacks - deficiencies in effective security policies  

What happens when there is a directed attack?
---
### We need a modernized definition of risk 

Cyberattacks are deliberate - frequency is 1

Risk associated with digitization related to the strength of their defenses and their connectivity with other systems

Means that common cause or cascading type 'failures' (attacks) increase risk

Traditional PRA kind of breaks down at this point

Solutions still should be within a performance based (vendor agnostic) context
---
### We also modeled a man in the middle attack for a plant

Boron monitoring system setpoint 

![Boron monitoring system](img/bms.jpg)

Showed 2 out of 3 circuit could mitigate the attack 
---
### Cybersecurity - what capabilities are needed?

Someone who can and likes to code  

Funding

Replicating past cyberattacks into WSC simulator

Development of new envelope of attacks as a design basis

I&C design and testing

Situational awareness (which is a human factors issue)

Interface with INL HSSL (with Ron, Katya et al.)
---
class: center, middle

### Idaho Global Entrepreneurial Mission

### State of Idaho Department of Commerce

#### Used fuel cask with Sakae Casting, LLC (Ibaraki)
---
### IGEM funds products to market

Collaboration with UIdaho, Boise State, Sakae

Sakae has unique aluminum casting capabilities

We proposed an intermediate storage cask of borated aluminum

UIdaho - Neutrons, heat removal, regulations

Boise St - Materials science - solid solution of $B_4C$ and $Al$

IGEM is a typical proposal process

Everyone gets up in your business

Present to the IGEM council and they vote on it
---
### We argue some used fuel pools filling up

Assemblies need several years cooling before transfer to standard dry casks

Understand that some are transferred sooner - not necessarily internationally

Design a cask pool and dry storage

I did the market research (IGEM requirement) 

Turns out hard numbers on used fuel pool capacities were really hard to find

Active NPP nations that are once through and not phasing out

For the most part, Europe doesn't seem to be a potential market

Most Asian countries lack robust dry storage

United States could go either way
---
### I used ORIGEN for burnup and depletion

Thanks to Steve Skutnik for help

Divided the cases in to low burnup, typical burnup, high burnup  

Based on literature review

(Read - N-XXYY - X.X% and YY GWD/MTU)

L-3030, T-4045, H-5060

Westinghouse 17x17 PWR  

515 day cycle length and pool cooling (decay) from discharge out to 20 years
---
class: middle,center
![Decay heat per assembly](img/Decay heat of used fuel per assembly.png)
---
### Then I ran many many many MCNP simulations for dose rate

I decided that the cask probably would only be useful for older fuel (20 y)

ORIGEN shows Cm-244 to be dominant emitter across the board (SDEF)

Plate thickness - 1.5, 3, 6, 12, 18, 30 cm

$B_4C$ - 10, 30, 50, 70, 90 wt% in Al per plate thickness

$^{10}B$ loading in $B_4C$ - 5, 10, 25, 50, 75 wt%

For each enrichment-burnup

Then a second set of simulations emplaced in concrete - 3, 5, 10, 15, 20 cm

Looking for plate thickness for dose rate below $10 \mu Sv/h$
---
class: center,middle
![Assembly](img/single.assembly_plan.view.guide.jpg)
---
class: center,middle
![Assembly](img/single.assembly_plan.view.guide_container.jpg)
---
### More MCNP modeling notes for your interest

Backfill - air, water, helium, borosilicate glass

Lattice card 17x17 unit cells - 269 rods - pitch 12.54 mm

Material card taken from ORIGEN output with 1E-08 wt% cutoff

Standard defaults for dose card

SDEF card - 5 source points per rod (POS)

ERG = Spontaneous Cm fission energy distribution

F2 tally for outward normal on each plate

NPS 2E6 (bare) and 3E6 (container) passed all tests

Equal dose rates off plates - isotropic
---
![L-3030 air glass](img/l3030_air_glass.png)
---
### What do the results mean for design? 

I don't know the cost of $^{10}B$

Sakae needs to figure out limits of plate casting 

Use of water backfill may be criticality risk if there are multiple casks

12 wt% $B_4C$ constraint for now

High burnup fuel may not be feasible
---
### I suggested NRC certification to enhance marketability

Currently 4 companies have obtained compliance each with different models

NUHOMS, MAGNASTOR, HI-STAR, HI-STORM (51 total)

10CFR72 is the relevant regulation

In short, the regulation is highly performance based

Demonstrate subcriticality, heat removal, occupational safety, etc.

Much of 10CFR72 is devoted to QA, which we can't do at this time

Application for Phase II design under review 
---
### Cask design - what capabilities are needed? 

MCNP a lot

Cost analysis

Safety analysis 

Establishing new quality assurance and quality control

Casting, but that is Sakae

Materials science
---
class: center, middle
![doggehs](img/final.jpg)
---
## Relevant publications

**Capstone**  
Leo M. Bobek, R. A. Borrelli, PLC-based reactivity measurements using inverse point kinetics, Transactions of the American Nuclear Society, 74, Annual meeting of the American Nuclear Society, 16-20 June, 1996, Reno, Nevada.

**Ph.D.**  
R. A. Borrelli, Olivier Thivent, Joonhong Ahn, Parametric studies on confinement of radionuclides in the excavated damaged zone due to bentonite type and temperature change, Physics and Chemistry of the Earth, 65, 32 (2013).  

R. A. Borrelli, Olivier Thivent, Joonhong Ahn, Impacts of elevated temperatures on bentonite extrusion and radionuclide transport in the excavated damaged zone, Nuclear Technology, 174(1), 94 (2011).
---
## Relevant publications

**Ph.D.**  
R. A. Borrelli, Joonhong Ahn, Radionuclide transport in a water-saturated planar fracture with bentonite extrusion, Nuclear Technology, 164(3), 442 (2008).  

R. A. Borrelli, Joonhong Ahn, Numerical modeling of bentonite extrusion and radionuclide migration in a saturated planar fracture, Physics and Chemistry of the Earth, 33 S131 (2008).
---
## Relevant publications

**Safeguardability**  
R. A. Borrelli, A high reliability safeguards approach for safeguardability of remotely-handled nuclear facilities: 1. Functional components to system design, Journal of Nuclear Materials Management, XLII(3), 4 (2014).  

R. A. Borrelli, A high reliability safeguards approach for safeguardability of remotely-handled nuclear facilities: 2. A risk-informed approach for safeguards, Journal of Nuclear Materials Management, XLII(3), 27 (2014).
---
## Relevant publications

**Safeguardability**  
R. A. Borrelli, J. Ahn, Y. Hwang, Approaches to a practical systems assessment for safeguardability of the advanced nuclear fuel cycle, Nuclear Technology, 197, 248 (2017).

R. A. Borrelli, Functional components for a design strategy: Hot cell shielding in the High Reliability Safeguards methodology, Nuclear Engineering and Design, 305, 18 (2016).

R. A. Borrelli, Use of curium neutron flux from head-end pyroprocessing subsystems for the high reliability safeguards methodology, Nuclear Engineering and Design, 277, 166 (2014).
---
## Relevant publications

**Safeguardability**  
J. Lee, M. Tolman, R. A. Borrelli, High reliability safeguards approach to remotely handled nuclear processing facilities: Use of discrete event simulation for material throughput for fuel fabrication, Nuclear Engineering and Design 324, 54 (2017).  

J. Lee, A. Shigrekar, R. A. Borrelli, Hazard and operability analysis of a pyroprocessing facility, Nuclear Engineering and Design 348, 131 (2019).  

J. Lee, R. A. Borrelli, Sensitivity analysis and application of advanced nuclear accounting methodologies on the high reliability safeguards model: Use of discrete event simulation for material throughput in fuel fabrication, Nuclear Engineering and Design 345, 183 (2019).
---
## Relevant publications

**Cybersecurity**  
J. Peterson, M. Haney, R. A. Borrelli, An overview of methodologies for cyber security vulnerability assessments conducted in nuclear power plants, Nuclear Engineering and Design 346, 75 (2019).

T. MacLean, M. Haney, R. A. Borrelli, Cybersecurity modeling of non-critical nuclear power plant digital instrumentation. Critical Infrastructure Protection XIII, J. Staggs, S. Shenoi, eds. Chapter 15, 277.
---
## Relevant publications

**IGEM**  
R. A. Borrelli, Updates on borated aluminum cask design for onsite used fuel storage, Proc., American Nuclear Society Annual Meeting, 09-13 June, 2019, Minneapolis, Minnesota.

R. A. Borrelli, J. S. Dustin, S. Pedersen, B. J. Jaques, Design of a borated aluminum cask design for onsite used fuel storage, Proc., American Nuclear Society Annual Meeting, 17-21 June, 2018 Philadelphia, Pennsylvania.

R. A. Borrelli, M. S. Delligatti, Regulatory licensing pathway for a borated aluminum cask design for onsite used fuel storage, Proc., American Nuclear Society Annual Meeting, 17-21 June, 2018, Philadelphia, Pennsylvania.
</textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/contrib/auto-render.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <script type="text/javascript">
        var options = {};
        var renderMath = function() {
            renderMathInElement(document.body, {delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "\\[", right: "\\]", display: false},
            ]});
        }
        var slideshow = remark.create({
          // Set the slideshow display ratio
          // Default: '4:3'
          // Alternatives: '16:9', ...
          ratio: '16:9',
          // Navigation options
          navigation: {
          // Enable or disable navigating using scroll
          // Default: true
          // Alternatives: false
          scroll: true,
          // Enable or disable navigation using touch
          // Default: true
          // Alternatives: false
          touch: true,
          // Enable or disable navigation using click
          // Default: false
          // Alternatives: true
          click: false
          },
          // Customize slide number label, either using a format string..
          slideNumberFormat: '%current%',
          // Enable or disable counting of incremental slides in the slide counting
          countIncrementalSlides: false 
          }, renderMath);
    </script>
    <script type="text/javascript">
     /**
      * a simple zoom in/out/reset for remark.js
      *
      * Hot key:
      *   + : zoom in
      *   - : zoom out
      *   0 : reset zoom
      *
      * CAVEAT: when switching between full screen and normal screen,
      *         the zoom factor may not function correctly.
      *         RELOAD the page, if necessary.
      *
      * 
      * @author William Yeh <william.pjyeh@gmail.com>
      * @date   2015-01-15
      *
      * @license Apache License, Version 2.0.
      * Copyright Â© 2015 William Yeh.
      */
      var ZOOM_TEXT_SELECTOR =
       ".remark-slide-content p"
       + "," + ".remark-slide-content .remark-code-line"
       ;

      var ZOOM_IMG_SELECTOR =
       ".remark-slide-content img:hover"
       ;

      var ZOOM_IMG_RULE;

      var zoom_factor = 100.0;
      document.body.style.zoom = "100%"
    
      function init_zoom_rule() {
       // @see http://davidwalsh.name/add-rules-stylesheets
       var styles = document.styleSheets[0];
       var index = styles.insertRule(
        ZOOM_IMG_SELECTOR + ' { transform:scale(1); }',
        styles.cssRules.length
        );

        ZOOM_IMG_RULE = styles.cssRules.item(index);
       }
    
      function apply_zoom() {
       var elements = document.querySelectorAll(ZOOM_TEXT_SELECTOR);
       //console.log('length:', elements.length);
       for (var i = 0; i < elements.length; ++i) {
        var item = elements[i];
        item.style.fontSize = zoom_factor.toString() + '%';
        }

        ZOOM_IMG_RULE.style.transform = 'scale(' + (zoom_factor / 100) + ')';
      }

      function zoom_in() {
       zoom_factor += 10;
       if (zoom_factor >= 200.0)  zoom_factor = 200.0;
       apply_zoom();
      }
    
      function zoom_out() {
       zoom_factor -= 10;
       if (zoom_factor <= 50.0)  zoom_factor = 50.0;
       apply_zoom();
      }

      function zoom_reset() {
       zoom_factor = 100.0;
       apply_zoom();
      }

      init_zoom_rule();
      window.addEventListener("keydown", function(event) {
       //console.log(event.keyCode);
       switch (event.keyCode) {
        case 187:  // '+': 187 in Chrome & Safari, 61 in FF
        case 61:  // '+': 187 in Chrome, 61 in FF
         zoom_in(); 
         break;

        case 189:  // '-': 189 in Chrome & Safari, 173 in FF
        case 173:  // '-': 189 in Chrome, 173 in FF
         zoom_out();
         break;
        case 48:   // '0'
         zoom_reset();
         break;
       }
      }, false);
    </script>
  </body>
</html>
